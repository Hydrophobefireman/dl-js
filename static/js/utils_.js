var parser=new DOMParser;function unpack(a){eval("with(env) {"+a+"}");return a=(a+"").replace(/;/g,";\n").replace(/{/g,"\n{\n").replace(/}/g,"\n}\n").replace(/\n;\n/g,";\n").replace(/\n\n/g,"\n")}function og_search(a,c){var b=a.querySelector("meta[property='og:"+c+"']")||a.querySelector("meta[name='og:"+c+"']")||a.querySelector("meta[itemprop='og:"+c+"']");return b?b.getAttribute("content"):b}function decodehtml(a){var c=document.createElement("textarea");c.innerHTML=a;return c.value}
function get_yt_id(a){a=new URL(a);return 0==a.search.length?a.pathname.substring(1):parseqs(a.search).v}function vidzi(a,c){var b={};b.base_url=c;b.video_urls=[];b.thumbnail="http://null";funcre=/eval\(function\(p[\s\S]*?\)\)\)/;a=parser.parseFromString(a,"text/html");evald=unpack(funcre.exec(a.body.innerHTML)[0]);b.title=a.title;mp4re=/file:"(http.*?mp4)"/;url=mp4re.exec(evald)[1];b.video_urls.push({url:url,quality:"highest"});return b}
function megadrive(a,c){var b={};b.base_url=c;a=parser.parseFromString(a,"text/html");b.title=og_search(a,"title");b.thumbnail=og_search(a,"image");reg=/mp4:["']([\s\S]*?)['"],/;b.video_urls=[];b.video_urls.push({url:reg.exec(a.body.innerHTML),quality:"Default"});return b}
function instagram(a,c){var b={};b.base_url=c;b.video_urls=[];a=parser.parseFromString(a,"text/html");b.title=a.title;b.thumbnail=og_search(a,"image");video=a.querySelector("meta[property='og:video']");null==video?b.image__=b.thumbnail:b.video_urls.push({url:video.getAttribute("content"),quality:"default"});return b}
function streamango(a,c){var b=new RegExp(/eval\(function\(p[\s\S]*?var\s*?srces=[\s\S]*?}\);/),d={video_urls:[]};a=parser.parseFromString(a,"text/html");script_=b.exec(a.body.innerHTML)[0];eval(script_);d.title=og_search(a,"title");d.thumbnail=og_search(a,"image");d.base_url=c;for(var e in srces)ret=srces[e],url=ret.src,-1==url.indexOf("http")&&(url="https:"+url),q=ret.height,d.video_urls.push({url:url,quality:q});return d}function rapidvideo(a,c){return estream(a,c)}
function watcheng(a,c){var b={video_urls:[]};a=parser.parseFromString(a,"text/html");b.title=a.title;b.thumbnail=a.getElementsByTagName("video")[0].getAttribute("poster");b.base_url=c;sources=a.getElementsByTagName("source")[0];b.video_urls.push({url:sources.src,quality:"default"});return b}
function estream(a,c){var b={video_urls:[]};a=parser.parseFromString(a,"text/html");b.title=a.title;thumbnail=og_search(a,"image");b.thumbnail=thumbnail||"//null";b.base_url=c;sources=a.getElementsByTagName("source");for(var d=0;d<sources.length;d++)el=sources[d],-1==el.getAttribute("src").indexOf("m3u8")&&b.video_urls.push({url:el.getAttribute("src"),quality:el.getAttribute("res")||el.getAttribute("label")||el.getAttribute("data-res")});return b}
function yourupload(a,c){var b={video_urls:[]};a=parser.parseFromString(a,"text/html");re=/file:\s'(.*?mp4)(?=',)/;url=re.exec(a.body.innerHTML)[1];b.video_urls.push({url:url,quality:"Highest"});b.base_url=c;b.thumbnail=og_search(a,"image");b.title=og_search(a,"title")||a.title;return b}
function youtube(a,c){var b=document.getElementById("btn-mp3");b.style.display="block";var d={youtube:!0};d.base_url=c;a=parser.parseFromString(a,"text/html");re=new RegExp(/ytplayer.config\s=\s(.*?)(?=;ytplayer.)/,"m");try{var e=re.exec(a.body.innerHTML)[1];js=JSON.parse(e)}catch(h){document.getElementById("errs").innerHTML="An Unknown Error occured",document.getElementById("errs").style.color="red",console.log(h),window.location="//dl-py.herokuapp.com/video?url="+encodeURIComponent(c),alert("Age Restricted Video Detected.using python parser")}e=
"https://www.youtube.com"+js.assets.js;var f="https://i.ytimg.com/vi/"+js.args.video_id+"/hqdefault.jpg"||js.args.thumbnail_url;d.title=js.args.title;d.basejs=e;d.thumbnail=f;d.video_urls=[];urls=js.args.url_encoded_fmt_stream_map.split(",");audio_urls=js.args.adaptive_fmts;d.ytaudio=!0;if(void 0==audio_urls)b.innerHTML="No audio url found for this video",d.ytaudio=!1;else{audio_urls=audio_urls.split(",");b.innerHTML="Click here for mp3 version of this video";for(b=0;b<audio_urls.length;b++)if(qs=
parseqs(audio_urls[b]),-1<qs.url.indexOf("audio")){audio_url=decodeURIComponent(qs.url);var g=qs.s}d.audio_url=[];d.audio_url.push({url:audio_url,sig_:g})}if(null!=parseqs(urls[0]).s)console.log("Fetch Signature Functions"),youtube_signatures(urls,d,d.basejs);else{for(b=0;b<urls.length;b++)qs=parseqs(urls[b]),-1<qs.url.indexOf("ratebypass")&&d.video_urls.push({url:decodeURIComponent(qs.url),quality:qs.quality});return d}}
function youtube_signatures(a,c,b){var d=new XMLHttpRequest;console.log(c);d.open("GET","/youtube/js/?url="+encodeURIComponent(b),!0);d.onload=function(){if(200===d.status){ret=JSON.parse(d.response);var e=document.createTextNode(ret.sig_js),f=ret.funcname,g=document.createElement("script");g.appendChild(e);document.body.appendChild(g);for(e=0;e<a.length;e++)qs=parseqs(a[e]),-1<qs.url.indexOf("ratebypass")&&(sig=qs.s,console.log(sig),new_sig=window[f](sig),b=decodeURIComponent(qs.url)+"&signature="+
new_sig,c.video_urls.push({url:b,quality:qs.quality}));sig=window[f](c.audio_url[0].sig_);console.log(sig);c.audio_url[0].url+="&signature="+sig;start_create_video(c)}};d.send()}function offer_proxy(){for(var a=document.getElementsByClassName("proxy_403"),c=0;c<a.length;c++)a[c].style.display="block"}
function get_videos(a){var c=new Request("/videos/fetch/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"url="+encodeURIComponent(a)});fetch(c).then(function(a){return a.json()}).then(function(b){if(b.hasOwnProperty("error"))document.getElementById("errs").innerHTML=b.error;else if(b.hasOwnProperty("redirect"))document.getElementById("errs").innerHTML="Redirecting to server extractor",window.location=b.redirect;else{page=b.html;funcname=b.funcname;a=b.landing_url;
try{data=window[funcname](page,a)}catch(d){throw document.getElementById("errs").innerHTML="An Unknown Error Occured",d;}console.log(data);"undefined"!=typeof data&&start_create_video(data)}})}function parseqs(a){var c={};a="?"==a[0]?a.substring(1):a;a=decodeURI(a);a=a.split("&");for(var b=0;b<a.length;b++){var d=a[b].split("=");c[d[0]]=d[1]}return c}
function create_video(a){var c=document.getElementById("videos");if(a.image__)document.body.innerHTML="<img src="+a.image__+">",c=document.createElement("div"),c.innerHTML=a.title,document.body.appendChild(c);else{a.youtube&&a.ytaudio&&(document.getElementById("btn-mp3url").href="/mp3extract/?mp3u="+encodeURIComponent(a.audio_url[0].url));json_data=a;document.title=json_data.title;document.getElementById("title").innerHTML=json_data.title;0==json_data.video_urls.length&&(document.getElementById("errs").innerHTML=
"No Playable Video Found..please Check if the video exists");for(a=0;a<json_data.video_urls.length;a++){var b=document.createElement("div");b.innerText=decodehtml(json_data.title);var d=document.createElement("div");d.innerText="Quality:"+json_data.video_urls[a].quality;b.style.fontWeight="bold";b.style.marginTop="10px";b.appendChild(d);d=document.createElement("video");var e=document.createElement("source"),f=decodehtml(json_data.video_urls[a].url);e.src=f;e.type="video/mp4";e.onerror=function(){offer_proxy()};
d.poster=json_data.thumbnail;d.controls="True";d.height="225";d.width="400";d.setAttribute("class","vid");d.preload="none";d.appendChild(e);e=document.createElement("div");var g=document.createElement("a");g.href=f;var h=document.createElement("button");h.setAttribute("class","proxy_403");h.style.display="none";h.innerHTML="View this video";h.onclick=function(){window.location="/fetch_url/?u="+encodeURIComponent(f)+"&referer="+encodeURIComponent(json_data.base_url)};g.innerText="Direct Link to Video File";
e.appendChild(g);c.appendChild(d);c.appendChild(h);c.appendChild(b);c.appendChild(document.createElement("br"));c.appendChild(e)}hpg=document.createElement("a");hpg.href="/";hpg.innerHTML="Homepage";a=document.createElement("div");a.appendChild(hpg);c.appendChild(a);document.getElementById("skelly").style.display="none";document.getElementById("dlfail").style.display="block"}}
function start_create_video(a){try{create_video(a)}catch(c){document.getElementById("errs").innerHTML="An Unknown Error occured",document.getElementById("errs").style.color="red",console.log(c)}};