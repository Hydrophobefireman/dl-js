const decodehtml=e=>{var t=document.createElement("textarea");return t.innerHTML=e,t.value};(async()=>{var e=decodehtml(decodehtml(document.title));if(0!=e.length){var t="Results for "+e;document.title=t}else document.title="Results from youtube.com"})();const search=()=>{var e="/search?q="+document.getElementById("search").value;window.location=e};document.getElementById("search").onkeyup=(e=>{13==e.keyCode&&search()});const b=document.getElementById("s-button");let get_data,extract_data,gen_results;b.onmouseover=(()=>{b.style.boxShadow="3px 3px #d9dce0"}),b.onmouseout=(()=>{b.style.boxShadow="0px 0px #d9dce0"}),b.ontouchstart=(()=>{b.style.boxShadow="3px 3px #d9dce0"}),b.ontouchend=(()=>{b.style.boxShadow="0px 0px #d9dce0"}),function(){this.get_data=(e=>{const t=new Request("/search/fetch/",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"q="+encodeURIComponent(e)});fetch(t).then(e=>e.json()).then(e=>{extract_data(e)}).then(e=>{console.log(e)}).catch(e=>{const t=document.createElement("div");t.style.color="red",t.innerText=e,document.getElementById("youtubeprev").appendChild(t)})}),this.extract_data=(e=>{if(html=e.html,trending=e.trending,console.log(trending),regex=new RegExp(/ytInitialData\"]\s=\s({[\s\S]*?});/,"gm"),json_data={},json_data.data=[],videos=[],m=regex.exec(html),reg=JSON.parse(m[1]),trending){const e=reg.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents;for(dat in e){const t=e[dat].itemSectionRenderer.contents[0].shelfRenderer.content,n=t[Object.keys(t)[0]].items;videos.push(...n)}}else for(opts in contents=reg.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents,contents)null!=contents[opts].videoRenderer&&videos.push(contents[opts]);for(e in videos){const n=videos[e],o=Object.keys(n)[0],a=n[o].videoId,d="https://i.ytimg.com/vi/"+a+"/hqdefault.jpg",s=n[o].title.simpleText,r=n[o].shortBylineText.runs[0].text,c="https://youtube.com"+n[o].shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url;try{var t=n[o].richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails[0].url}catch(e){t=null}const i="/video?url="+encodeURIComponent("https://youtu.be/"+a);json_data.data.push({url:i,thumb:d,title:s,channel:r,channel_url:c,preview:t})}gen_results(json_data)}),this.gen_results=(e=>{document.getElementById("skelly").style.display="none",document.getElementById("content").style.display="block";for(let t=0;t<e.data.length;t++){const n=document.createElement("a"),o=document.createElement("img");o.setAttribute("class","rounded-image"),o.src=e.data[t].thumb;const a=e.data[t].title,d=e.data[t].url,s=e.data[t].channel,r=e.data[t].channel_url;o.setAttribute("data-motion",e.data[t].preview),o.setAttribute("data-img",e.data[t].thumb),o.setAttribute("alt","No Preview available or your browser does not support webp images"),o.style.display="inline-block",n.href=d,n.appendChild(o),n.appendChild(document.createElement("br"));const c=document.createElement("b");c.innerHTML=a,n.appendChild(c);const i=document.createElement("a");i.href=r,i.innerHTML=s,o.onmouseover=function(){this.src=this.getAttribute("data-motion")},o.onmouseout=function(){this.src=this.getAttribute("data-img")},o.ontouchstart=function(){this.src=this.getAttribute("data-motion")},o.ontouchend=function(){this.src=this.getAttribute("data-img")};const l=document.createElement("div");l.innerHTML="Video By:",l.appendChild(i),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br")),document.getElementById("content").appendChild(n),document.getElementById("content").appendChild(l)}return"Created Results"})}.call(this);