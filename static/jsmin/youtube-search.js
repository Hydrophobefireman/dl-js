function decodehtml(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}var doctitle=decodehtml(decodehtml(document.title));if(0!=doctitle.length){var titles="Results for "+doctitle;document.title=titles}else document.title="Results from youtube.com";function search(){var e="/search?q="+document.getElementById("search").value;window.location=e}document.getElementById("search").onkeyup=function(e){13==e.keyCode&&search()};var get_data,extract_data,gen_results,b=document.getElementById("s-button");b.onmouseover=function(){b.style.boxShadow="3px 3px #d9dce0"},b.onmouseout=function(){b.style.boxShadow="0px 0px #d9dce0"},b.ontouchstart=function(){b.style.boxShadow="3px 3px #d9dce0"},b.ontouchend=function(){b.style.boxShadow="0px 0px #d9dce0"},function(){this.get_data=function(e){var t=new Request("/search/fetch/",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"q="+encodeURIComponent(e)});fetch(t).then(e=>e.json()).then(e=>{extract_data(e)}).then(function(e){console.log(e)}).catch(function(e){var t=document.createElement("div");t.style.color="red",t.innerText=e,document.getElementById("youtubeprev").appendChild(t)})},this.extract_data=function(e){if(html=e.html,trending=e.trending,console.log(trending),regex=new RegExp(/ytInitialData"]\s=\s({[\s\S]*?});/,"gm"),json_data={},json_data.data=[],videos=[],m=regex.exec(html),reg=JSON.parse(m[1]),trending){var t=reg.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents;for(dat in t){var n=t[dat].itemSectionRenderer.contents[0].shelfRenderer.content,o=n[Object.keys(n)[0]].items;videos.push(...o)}}else for(opts in contents=reg.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents,contents)null!=contents[opts].videoRenderer&&videos.push(contents[opts]);for(e in videos){var a=videos[e],d=Object.keys(a)[0],r=a[d].videoId,i="https://i.ytimg.com/vi/"+r+"/hqdefault.jpg",s=a[d].title.simpleText,c=a[d].shortBylineText.runs[0].text,l="//youtube.com"+a[d].shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url;try{var u=a[d].richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails[0].url}catch(e){u=null}var h="/video?url="+encodeURIComponent("https://youtu.be/"+r);json_data.data.push({url:h,thumb:i,title:s,channel:c,channel_url:l,preview:u})}gen_results(json_data)},this.gen_results=function(e){document.getElementById("skelly").style.display="none",document.getElementById("content").style.display="block";for(var t=0;t<e.data.length;t++){var n=document.createElement("a"),o=document.createElement("img");o.setAttribute("class","rounded-image"),o.src=e.data[t].thumb;var a=e.data[t].title,d=e.data[t].url,r=e.data[t].channel,i=e.data[t].channel_url;o.setAttribute("data-motion",e.data[t].preview),o.setAttribute("data-img",e.data[t].thumb),o.setAttribute("alt","No Preview available or your browser does not support webp images"),o.style.display="inline-block",n.href=d,n.appendChild(o),n.appendChild(document.createElement("br"));var s=document.createElement("b");s.innerHTML=a,n.appendChild(s);var c=document.createElement("a");c.href=i,c.innerHTML=r,o.onmouseover=function(){this.src=this.getAttribute("data-motion")},o.onmouseout=function(){this.src=this.getAttribute("data-img")},o.ontouchstart=function(){this.src=this.getAttribute("data-motion")},o.ontouchend=function(){this.src=this.getAttribute("data-img")};var l=document.createElement("div");l.innerHTML="Video By:",l.appendChild(c),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br")),document.getElementById("content").appendChild(n),document.getElementById("content").appendChild(l)}return"Created Results"}}.call(this);