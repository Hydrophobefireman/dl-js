function decodehtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}const doctitle=decodehtml(decodehtml(document.title));if(0!=doctitle.length){const e=`Results for ${doctitle}`;document.title=e}else document.title="Results from youtube.com";function search(){const e=`/search?q=${document.getElementById("search").value}`;window.location=e}document.getElementById("search").onkeyup=(({keyCode:e})=>{13==e&&search()});const b=document.getElementById("s-button");let get_data,extract_data,gen_results;b.onmouseover=(()=>{b.style.boxShadow="3px 3px #d9dce0"}),b.onmouseout=(()=>{b.style.boxShadow="0px 0px #d9dce0"}),b.ontouchstart=(()=>{b.style.boxShadow="3px 3px #d9dce0"}),b.ontouchend=(()=>{b.style.boxShadow="0px 0px #d9dce0"}),function(){this.get_data=(e=>{const t=new Request("/search/fetch/",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`q=${encodeURIComponent(e)}`});fetch(t).then(e=>e.json()).then(e=>{extract_data(e)}).then(e=>{console.log(e)}).catch(e=>{const t=document.createElement("div");t.style.color="red",t.innerText=e,document.getElementById("youtubeprev").appendChild(t)})}),this.extract_data=(e=>{if(html=e.html,trending=e.trending,console.log(trending),regex=new RegExp(/ytInitialData"]\s=\s({[\s\S]*?});/,"gm"),json_data={},json_data.data=[],videos=[],m=regex.exec(html),reg=JSON.parse(m[1]),trending){const e=reg.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents;for(dat in e){const t=e[dat].itemSectionRenderer.contents[0].shelfRenderer.content,n=t[Object.keys(t)[0]].items;videos.push(...n)}}else for(opts in contents=reg.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents,contents)null!=contents[opts].videoRenderer&&videos.push(contents[opts]);for(e in videos){const n=videos[e],o=Object.keys(n)[0],s=n[o].videoId,d=`https://i.ytimg.com/vi/${s}/hqdefault.jpg`,c=n[o].title.simpleText,a=n[o].shortBylineText.runs[0].text,r=`//youtube.com${n[o].shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url}`;try{var t=n[o].richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails[0].url}catch(e){t=null}const i=`/video?url=${encodeURIComponent(`https://youtu.be/${s}`)}`;json_data.data.push({url:i,thumb:d,title:c,channel:a,channel_url:r,preview:t})}gen_results(json_data)}),this.gen_results=(({data:e})=>{document.getElementById("skelly").style.display="none",document.getElementById("content").style.display="block";let t=0;for(;t<e.length;t++){const n=document.createElement("a"),o=document.createElement("img");o.setAttribute("class","rounded-image"),o.src=e[t].thumb;const s=e[t].title,d=e[t].url,c=e[t].channel,a=e[t].channel_url;o.setAttribute("data-motion",e[t].preview),o.setAttribute("data-img",e[t].thumb),o.setAttribute("alt","No Preview available or your browser does not support webp images"),o.style.display="inline-block",n.href=d,n.appendChild(o),n.appendChild(document.createElement("br"));const r=document.createElement("b");r.innerHTML=s,n.appendChild(r);const i=document.createElement("a");i.href=a,i.innerHTML=c,o.onmouseover=function(){this.src=this.getAttribute("data-motion")},o.onmouseout=function(){this.src=this.getAttribute("data-img")},o.ontouchstart=function(){this.src=this.getAttribute("data-motion")},o.ontouchend=function(){this.src=this.getAttribute("data-img")};const l=document.createElement("div");l.innerHTML="Video By:",l.appendChild(i),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br")),document.getElementById("content").appendChild(n),document.getElementById("content").appendChild(l)}return"Created Results"})}.call(this);