function get_data(e){var t=new Request("/search/fetch/",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"q="+encodeURIComponent(e)});fetch(t).then(e=>e.json()).then(e=>{extract_data(e)}).then(function(e){console.log(e)}).catch(function(e){var t=document.createElement("div");t.style.color="red",t.innerText=e,document.getElementById("youtubeprev").appendChild(t)})}function extract_data(e){if(html=e.html,trending=e.trending,console.log(trending),regex=new RegExp(/ytInitialData\"]\s=\s({[\s\S]*?});/,"gm"),json_data={},json_data.data=[],videos=[],m=regex.exec(html),reg=JSON.parse(m[1]),trending){var t=reg.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents;for(dat in t){var n=t[dat].itemSectionRenderer.contents[0].shelfRenderer.content,o=n[Object.keys(n)[0]].items;videos.push(...o)}}else for(opts in contents=reg.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents,contents)null!=contents[opts].videoRenderer&&videos.push(contents[opts]);for(e in videos){var a=videos[e],r=Object.keys(a)[0],d=a[r].videoId,i="https://i.ytimg.com/vi/"+d+"/hqdefault.jpg",s=a[r].title.simpleText,c=a[r].shortBylineText.runs[0].text,l="//youtube.com"+a[r].shortBylineText.runs[0].navigationEndpoint.commandMetadata.webCommandMetadata.url;try{var u=a[r].richThumbnail.movingThumbnailRenderer.movingThumbnailDetails.thumbnails[0].url}catch(e){u=null}var h="/video?url="+encodeURIComponent("https://youtu.be/"+d);json_data.data.push({url:h,thumb:i,title:s,channel:c,channel_url:l,preview:u})}gen_results(json_data)}function gen_results(e){document.getElementById("skelly").style.display="none",document.getElementById("content").style.display="block";for(var t=0;t<e.data.length;t++){var n=document.createElement("a"),o=document.createElement("img");o.setAttribute("class","rounded-image"),o.src=e.data[t].thumb;var a=e.data[t].title,r=e.data[t].url,d=e.data[t].channel,i=e.data[t].channel_url;o.setAttribute("data-motion",e.data[t].preview),o.setAttribute("data-img",e.data[t].thumb),o.setAttribute("alt","No Preview available or your browser does not support webp images"),o.style.display="inline-block",n.href=r,n.appendChild(o),n.appendChild(document.createElement("br"));var s=document.createElement("b");s.innerHTML=a,n.appendChild(s);var c=document.createElement("a");c.href=i,c.innerHTML=d,o.onmouseover=function(){this.src=this.getAttribute("data-motion")},o.onmouseout=function(){this.src=this.getAttribute("data-img")},o.ontouchstart=function(){this.src=this.getAttribute("data-motion")},o.ontouchend=function(){this.src=this.getAttribute("data-img")};var l=document.createElement("div");l.innerHTML="Video By:",l.appendChild(c),l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br")),document.getElementById("content").appendChild(n),document.getElementById("content").appendChild(l)}return"Created Results"}