document.getElementById("name-set").onclick=(e=>{e.target.innerHTML="Name Changed",document.getElementById("download-link").download=document.getElementById("filename").value}),document.getElementById("filename").onclick=(()=>{document.getElementById("name-set").innerHTML="change Name"});const xhr=new XMLHttpRequest;xhr.open("GET","/proxy/f/?u="+encodeURIComponent(window.dlurl)+"&referer="+encodeURIComponent(window.dlref)),xhr.send(),xhr.onload=(()=>{setTimeout(check_download,1e3)});var next_req=!0;function check_download(){const e=new XMLHttpRequest;e.open("GET","/session/_/progress-poll/",!0),e.onload=(()=>{if(data=JSON.parse(e.response),data.hasOwnProperty("error")&&(next_req=!1),data.hasOwnProperty("file"))document.getElementById("download-link").href=data.link,document.getElementById("dl-button").style.display="block",next_req=!1,document.getElementById("till-done").innerHTML="100",document.getElementById("progressbtn").style.width="100%";else{const e=parseInt(data.done),n=parseInt(data.total),t=(e/n*100).toFixed(2);document.getElementById("till-done").innerHTML=t,document.getElementById("total-size-int").innerHTML=(n/1048576).toFixed(2),document.getElementById("progressbtn").style.display="block",document.getElementById("progressbtn").style.width=t+"%"}}),e.onerror=(()=>{next_req=!1}),next_req&&(e.send(),setTimeout(check_download,3e3))}