document.getElementById("name-set").onclick=function(){this.innerHTML="Name Changed",document.getElementById("download-link").download=document.getElementById("filename").value},document.getElementById("filename").onclick=function(){document.getElementById("name-set").innerHTML="change Name"};var xhr=new XMLHttpRequest;xhr.open("GET","/proxy/f/?u="+encodeURIComponent(window.dlurl)+"&referer="+encodeURIComponent(window.dlref)),xhr.send(),xhr.onload=function(){setTimeout(check_download,1e3)};var next_req=!0;function check_download(){var e=new XMLHttpRequest;e.open("GET","/session/_/progress_poll/",!0),e.onload=function(){if(data=JSON.parse(e.response),data.hasOwnProperty("error")&&(next_req=!1),data.hasOwnProperty("file"))document.getElementById("download-link").href=data.link,document.getElementById("dl-button").style.display="block",next_req=!1,document.getElementById("till-done").innerHTML="100",document.getElementById("progressbtn").style.width="100%";else{var n=parseInt(data.done),t=parseInt(data.total),o=(n/t*100).toFixed(2);document.getElementById("till-done").innerHTML=o,document.getElementById("total-size-int").innerHTML=(t/1048576).toFixed(2),document.getElementById("progressbtn").style.display="block",document.getElementById("progressbtn").style.width=o+"%"}},e.onerror=function(){next_req=!1},next_req&&(e.send(),setTimeout(check_download,3e3))}